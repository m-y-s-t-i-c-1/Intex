const translations = {
    ro: {
        menu_home: "Acasă", 
        menu_products: "Produse", 
        menu_about: "Despre Noi",
        menu_faq: "FAQ", 
        menu_policy: "Termeni & Condiții", 
        menu_contact: "Contacte",
        terms_title: "Termeni și Condiții de Utilizare", 
        terms_subtitle: "Acest document stabilește termenii de utilizare a site-ului și condițiile de achiziționare a produselor comercializate de Zova Grup SRL.",
        terms_intro_title: "TERMENI ȘI CONDIȚII DE UTILIZARE",
        terms_general_title: "1. DISPOZIȚII GENERALE", 
        terms_definitions_title: "2. DEFINIȚII/NOȚIUNI", 
        terms_data_title: "3. SECURITATEA DATELOR CU CARACTER PERSONAL",
        terms_cookies_title: "4. FOLOSIREA COOKIE-URILOR", 
        terms_purchase_title: "7. CUM CUMPĂRĂM?", 
        terms_payment_title: "8. CUM PLĂTIM?",
        terms_delivery_title: "LIVRARE", 
        terms_refund_title: "POLITICA DE RAMBURSĂRI ȘI RETURNĂRI", 
        terms_refund_subtitle: "Rambursarea plății (Revocarea Operațiunii)",
        terms_return_subtitle: "Returnarea mărfii", 
        terms_return_conditions: "Condiții de Acceptare a Returului (Anexa la Legea nr. 105)",
        terms_non_returnable: "Lista produselor ce nu pot fi înlocuite (Articole de calitate corespunzătoare)", 
        terms_complaints_title: "RECLAMAȚII", 
        terms_final_title: "DISPOZIȚII FINALE ȘI JURIDICE",
        faq_title: "Întrebări Frecvente (FAQ)", 
        faq_subtitle: "Găsiți rapid răspunsuri la cele mai comune întrebări despre piscine, accesorii și comenzi.",
        cat_orders: "Comenzi și Livrare", 
        cat_pools: "Despre Piscine INTEX",
        q1_title: "Care este timpul de livrare estimat?", 
        q1_answer: "De obicei, livrarea durează 1-2 zile lucrătoare pe teritoriul Moldovei, din momentul confirmării comenzii. În perioadele de vârf (mai-august), livrarea poate dura până la 3 zile.",
        q2_title: "Pot ridica personal produsele?", 
        q2_answer: "Da, puteți ridica produsele direct de la depozitul sau showroom-ul nostru din Chișinău, la adresa Calea Orheiului 123. Vă rugăm să ne contactați în prealabil pentru a verifica stocul.",
        q3_title: "Cum trebuie să depozitez piscina pe timp de iarnă?", 
        q3_answer: "Piscina trebuie curățată, uscată complet și împachetată în cutia originală. Este esențial să o depozitați într-un loc uscat și ferit de îngheț (de preferat la temperaturi între 5°C și 35°C).",
        q4_title: "Cât de des trebuie să schimb apa din piscină?", 
        q4_answer: "Dacă folosiți un sistem de filtrare adecvat și produse de îngrijire a apei (clor, algicid), nu este necesar să schimbați apa pe tot parcursul sezonului. Schimbul total se face de obicei doar la sfârșitul sezonului.",
        need_help_title: "Nu ați găsit răspunsul?", 
        need_help_text: "Echipa noastră de suport este gata să vă ajute cu orice întrebare specifică.", contact_us_btn: "Contactați-ne Acum",
        contact_title: "Contactează-ne", 
        addr_label: "Adresa:", 
        phone_label: "Telefon:", 
        email_label: "Email:", 
        hours_label: "Program:", 
        hours_val: "Luni - Duminică: 09:00 - 19:00"
    },
    ru: {
        menu_home: "Главная", 
        menu_products: "Продукты", 
        menu_about: "О Нас", 
        menu_faq: "FAQ", 
        menu_policy: "Условия", 
        menu_contact: "Контакты",
        terms_title: "Условия Использования", 
        terms_subtitle: "Этот документ устанавливает условия использования сайта и условия покупки товаров, продаваемых Zova Grup SRL.",
        terms_intro_title: "УСЛОВИЯ ИСПОЛЬЗОВАНИЯ",
        terms_general_title: "1. ОБЩИЕ ПОЛОЖЕНИЯ", 
        terms_definitions_title: "2. ОПРЕДЕЛЕНИЯ/ПОНЯТИЯ", 
        terms_data_title: "3. БЕЗОПАСНОСТЬ ПЕРСОНАЛЬНЫХ ДАННЫХ",
        terms_cookies_title: "4. ИСПОЛЬЗОВАНИЕ ФАЙЛОВ COOKIE", 
        terms_purchase_title: "7. КАК КУПИТЬ?", 
        terms_payment_title: "8. КАК ОПЛАТИТЬ?",
        terms_delivery_title: "ДОСТАВКА", 
        terms_refund_title: "ПОЛИТИКА ВОЗВРАТА И ВОЗМЕЩЕНИЯ", 
        terms_refund_subtitle: "Возмещение оплаты (Отзыв Платежной Операции)",
        terms_return_subtitle: "Возврат товара", 
        terms_return_conditions: "Условия Принятия Возврата (Приложение к Закону № 105)",
        terms_non_returnable: "Список товаров, не подлежащих замене (Качественные непродовольственные товары)", 
        terms_complaints_title: "РЕКЛАМАЦИИ", 
        terms_final_title: "ЗАКЛЮЧИТЕЛЬНЫЕ И ЮРИДИЧЕСКИЕ ПОЛОЖЕНИЯ",
        faq_title: "Часто Задаваемые Вопросы (FAQ)", 
        faq_subtitle: "Быстро найдите ответы на самые распространенные вопросы о бассейнах, аксессуарах и заказах.",
        cat_orders: "Заказы и Доставка", 
        cat_pools: "О Бассейнах INTEX",
        q1_title: "Каково расчетное время доставки?", 
        q1_answer: "Обычно доставка по территории Молдовы занимает 1-2 рабочих дня с момента подтверждения заказа. В пиковые периоды (май-август) доставка может занять до 3 дней.",
        q2_title: "Могу ли я забрать товары лично?", 
        q2_answer: "Да, вы можете забрать товары непосредственно с нашего склада или выставочного зала в Кишиневе, по адресу Каля Орхеюлуй 123. Пожалуйста, свяжитесь с нами заранее, чтобы проверить наличие на складе.",
        q3_title: "Как хранить бассейн зимой?",
        q3_answer: "Бассейн следует почистить, полностью высушить и упаковать в оригинальную коробку. Важно хранить его в сухом и защищенном от мороза месте (предпочтительно при температуре от 5°C до 35°C).",
        q4_title: "Как часто нужно менять воду в бассейне?", 
        q4_answer: "Если вы используете подходящую систему фильтрации и средства по уходу за водой (хлор, альгицид), менять воду в течение всего сезона не нужно. Полная замена обычно производится только в конце сезона.",
        need_help_title: "Не нашли ответ?", 
        need_help_text: "Наша служба поддержки готова помочь вам с любым конкретным вопросом.", contact_us_btn: "Связаться с Нами Сейчас",
        contact_title: "Свяжитесь с нами", 
        addr_label: "Адрес:", 
        phone_label: "Телефон:", 
        email_label: "Email:", 
        hours_label: "График:", 
        hours_val: "Понедельник - Воскресенье: 09:00 - 19:00"
    },
    en: {
        menu_home: "Home", 
        menu_products: "Products", 
        menu_about: "About Us", 
        menu_faq: "FAQ", 
        menu_policy: "Terms & Conditions", 
        menu_contact: "Contact",
        terms_title: "Terms and Conditions of Use", 
        terms_subtitle: "This document sets out the terms of use of the website and the purchase conditions for products sold by Zova Grup SRL.",
        terms_intro_title: "TERMS AND CONDITIONS OF USE",
        terms_general_title: "1. GENERAL PROVISIONS", 
        terms_definitions_title: "2. DEFINITIONS/CONCEPTS", 
        terms_data_title: "3. SECURITY OF PERSONAL DATA",
        terms_cookies_title: "4. USE OF COOKIES", 
        terms_purchase_title: "7. HOW TO BUY?", 
        terms_payment_title: "8. HOW TO PAY?",
        terms_delivery_title: "DELIVERY", 
        terms_refund_title: "REFUND AND RETURN POLICY", 
        terms_refund_subtitle: "Refund of payment (Revocation of Payment Operation)",
        terms_return_subtitle: "Return of Goods", 
        terms_return_conditions: "Conditions for Accepting Returns (Annex to Law No. 105)",
        terms_non_returnable: "List of Non-Replaceable Products (Quality Non-Food Items)", 
        terms_complaints_title: "COMPLAINTS", 
        terms_final_title: "FINAL AND LEGAL PROVISIONS",
        faq_title: "Frequently Asked Questions (FAQ)", 
        faq_subtitle: "Quickly find answers to the most common questions about pools, accessories, and orders.",
        cat_orders: "Orders and Delivery", 
        cat_pools: "About INTEX Pools",
        q1_title: "What is the estimated delivery time?", 
        q1_answer: "Delivery usually takes 1-2 business days within Moldova from the moment of order confirmation. During peak periods (May-August), delivery may take up to 3 days.",
        q2_title: "Can I pick up the products myself?", 
        q2_answer: "Yes, you can pick up the products directly from our warehouse or showroom in Chișinău, at Calea Orheiului 123. Please contact us beforehand to check stock availability.",
        q3_title: "How should I store the pool during winter?", 
        q3_answer: "The pool must be cleaned, completely dried, and packed in its original box. It is essential to store it in a dry place protected from frost (preferably at temperatures between 5°C and 35°C).",
        q4_title: "How often should I change the pool water?", 
        q4_answer: "If you use an adequate filtration system and water care products (chlorine, algaecide), you do not need to change the water throughout the season. The total change is usually only done at the end of the season.",
        need_help_title: "Didn't find the answer?", 
        need_help_text: "Our support team is ready to help you with any specific question.", 
        contact_us_btn: "Contact Us Now",
        contact_title: "Contact Us", 
        addr_label: "Address:", 
        phone_label: "Phone:", 
        email_label: "Email:", 
        hours_label: "Hours:", 
        hours_val: "Monday - Sunday: 09:00 - 19:00"
    }
};

const searchOverlay = document.getElementById('search-overlay');
const searchInput = document.getElementById('search-input');
const themeBtn = document.getElementById('themeBtn');
const icon = themeBtn ? themeBtn.querySelector('i') : null;

function setLanguage(lang) {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            el.innerHTML = translations[lang][key]; 
        }
    });
    document.querySelectorAll('.lang-opt').forEach(span => {
        span.classList.remove('active');
        if(span.innerText.toLowerCase() === lang) {
            span.classList.add('active');
            localStorage.setItem('language', lang); 
        }
    });
}

function applyTheme(isDark) {
    const isDarkMode = isDark ?? document.body.classList.contains('dark-mode');
    document.body.classList.toggle('dark-mode', isDarkMode);
    localStorage.setItem('darkMode', isDarkMode);

    if (icon) {
        icon.classList.replace(isDarkMode ? 'fa-moon' : 'fa-sun', isDarkMode ? 'fa-sun' : 'fa-moon');
    }
}

function openSearch() {
    if (searchOverlay) {
        searchOverlay.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        setTimeout(() => searchInput.focus(), 100); 
    }
}

function closeSearch() {
    if (searchOverlay) {
        searchOverlay.style.display = 'none';
        document.body.style.overflow = '';
        searchInput.value = '';
    }
}

function performSearch(event) {
    event.preventDefault(); 
    const query = searchInput.value.trim();
    
    if (query.length > 0) {
        alert(`Caută: "${query}". (Logica de căutare va fi implementată aici)`);
        closeSearch();
    } else {
        alert("Vă rugăm să introduceți un termen de căutare.");
    }
}

function initializeAccordion() {
    document.querySelectorAll('.accordion-header').forEach(button => {
        button.addEventListener('click', () => {
            const item = button.parentNode;
            const content = button.nextElementSibling;
            const isActive = item.classList.contains('active');

            document.querySelectorAll('.accordion-item.active').forEach(activeItem => {
                if (activeItem !== item) {
                    activeItem.classList.remove('active');
                    activeItem.querySelector('.accordion-content').style.maxHeight = 0;
                }
            });

            item.classList.toggle('active', !isActive);
            content.style.maxHeight = isActive ? 0 : content.scrollHeight + "px";
        });
    });
}

document.addEventListener('DOMContentLoaded', () => {
    const initialLang = localStorage.getItem('language') || 'ro';
    setLanguage(initialLang);

    const initialDarkMode = localStorage.getItem('darkMode') === 'true';
    applyTheme(initialDarkMode);

    initializeAccordion(); 

    if (themeBtn) {
        themeBtn.addEventListener('click', () => applyTheme(!document.body.classList.contains('dark-mode')));
    }
    
    if (document.getElementById('searchBtn')) {
        document.getElementById('searchBtn').addEventListener('click', openSearch);
    }
    
    const searchForm = document.querySelector('#search-overlay form');
    if (searchForm) {
        searchForm.addEventListener('submit', performSearch);
    }

    document.querySelectorAll('.lang-opt').forEach(span => {
        span.addEventListener('click', function() {
            setLanguage(this.innerText.toLowerCase());
        });
    });
});